<?xml version="1.0" encoding="UTF-8"?>
<chapter id="perspective" xreflabel="perspective" role="updated">
    <?dbhtml filename="perspective.html"?>
    <chapterinfo>
        <keywordset>
            <keyword>JBoss Developer Studio</keyword>
            <keyword>Eclipse</keyword>
            <keyword>Deploy</keyword>
            <keyword>Deployment</keyword>
            <keyword>JBoss</keyword>
        </keywordset>
    </chapterinfo>

    <title>JBoss AS Perspective</title>

    <para>This chapter tells how to manage installed <property>JBoss Server</property> via
            <property>JBoss AS perspective</property>.</para>

    <para>The <property>JBoss AS perspective</property> is similar to the <property>Java
            perspective</property>, but it contains a few additional views. Two of the additional
        views are standard views, specifically the <property>Console view</property> and the
            <property>Properties view</property>. The other two views that are added are the
            <property>Project archives view</property> and the <property>JBoss Server
            View</property>.</para>

    <section id="JBossServerView" role="updated">
        <?dbhtml filename="JBossServerView.html"?>
        <title>The JBoss Server View</title>

        <para>The <property>JBoss Server View</property> is built on Common Navigator Framework
            allowing extensions and is using label decorators what makes the UI enough compact
            without loosing the vital information.</para>

        <para>Let&apos;s have a look at the <property>JBoss Server View</property> and inspect
            in detail all parts it consists of. </para>
        <figure>
            <title>The JBoss Server View</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/perspective/perspective_1.png"/>
                </imageobject>
            </mediaobject>
        </figure>

        <section id="jbossserver_view_toolbar">
            <title>JBoss Server View Toolbar</title>
            <para>In the right top corner of the <property>JBoss Server View</property> there is a
                special toolbar which provides a quick access to starting a server (in the debug
                mode, run mode, or profile mode), restarting a server, stopping a server and a
                possibility to publish to a server.</para>

            <figure>
                <title>The JBoss Server View Toolbar</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/perspective/perspective_2.png"/>
                    </imageobject>
                </mediaobject>
            </figure>

            <para>In order to debug your applications or EJB's that are deployed to the server, you
                must start the server in debug mode. By starting the server in debug mode, eclipse
                will allow you to set breakpoints on code in your workspace and step through the
                code.</para>

            <para><emphasis>
                    <property>Start the server in profiling mode</property>
                </emphasis> button allows to enable profiling actions for your application. For more
                details on how to start using TPTP profiling with <property>JBoss Tools</property>
                refer to <link linkend="tptp_support">TPTP Support</link> chapter.</para>

            <para><emphasis>
                    <property>Publish to the server</property>
                </emphasis> button will republish any modules where it has determined the workspace
                is out of sync with the server. It will attempt to do an incremental publish if it
                turns out that the module in question is capable of doing one.</para>

        </section>

        <section id="jbossserver_view_structure">
            <title>JBoss Server View Structure</title>
            <para>The <property>JBoss Server View</property> displays all declared servers as well
                as their current states (that is whether they are started or stopped) and statuses
                in the square brackets next to a server name.</para>

            <figure>
                <title>The JBoss Server View</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/perspective/perspective_1.png"/>
                    </imageobject>
                </mediaobject>
            </figure>

            <para>The following table lists possible server statuses.</para>

            <table>
                <title>Server Publish Status</title>
                <tgroup cols="2">
                    <colspec colnum="1" align="left" colwidth="1*"/>
                    <colspec colnum="2" colwidth="3*"/>


                    <thead>
                        <row>
                            <entry align="center">Status</entry>

                            <entry align="center">Description</entry>
                        </row>
                    </thead>

                    <tbody>
                        <row>
                            <entry align="center">
                                <para>Republish</para>
                            </entry>

                            <entry align="center">
                                <para>The status which allows you to see if changes are
                                    awaiting</para>
                            </entry>
                        </row>
                        <row>
                            <entry align="center">
                                <para>Publishing...</para>
                            </entry>

                            <entry align="center">
                                <para>The status which shows if changes are being updated</para>
                            </entry>
                        </row>
                        <row>
                            <entry align="center">
                                <para>Synchronized</para>
                            </entry>

                            <entry align="center">
                                <para>The status which allows you to see if changes are
                                    in-sync</para>
                            </entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>

            <para>You can control a server behavior as well as adjust some server preferences with
                the help of the context menu commands.</para>

            <figure>
                <title>Context Menu Commands</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/perspective/perspective_8.png"/>
                    </imageobject>
                </mediaobject>
            </figure>

            <para>All available context menu commands are described in the following table.</para>
            <table>
                <title>Server Properties through the Context Menu</title>
                <tgroup cols="2">
                    <colspec colnum="1" align="left" colwidth="1*"/>
                    <colspec colnum="2" colwidth="3*"/>

                    <thead>
                        <row>
                            <entry align="center">
                                <para>Name</para>
                            </entry>

                            <entry align="center">
                                <para>Description</para>
                            </entry>
                        </row>
                    </thead>

                    <tbody>
                        <row>
                            <entry>
                                <para>New Server</para>
                            </entry>
                            <entry>
                                <para>The option allows to define a new server</para>
                            </entry>
                        </row>

                        <row>
                            <entry>
                                <para>Open</para>
                            </entry>
                            <entry>
                                <para>The option opens the Server editor</para>
                            </entry>
                        </row>

                        <row>
                            <entry>
                                <para>Show in</para>
                            </entry>
                            <entry>
                                <para>This option gives an easy access to the next views: Console,
                                    Debug view, Server Log or MBean Explorer</para>
                            </entry>
                        </row>

                        <row>
                            <entry>
                                <para>Delete</para>
                            </entry>
                            <entry>
                                <para>Standard option that allows to delete the chosen server</para>
                            </entry>
                        </row>

                        <row>
                            <entry>
                                <para>Start</para>
                            </entry>
                            <entry>
                                <para>The action for stating a server in a run mode</para>
                            </entry>
                        </row>

                        <row>
                            <entry>
                                <para>Debug</para>
                            </entry>
                            <entry>
                                <para>The action for stating a server in a debug mode</para>
                            </entry>
                        </row>

                        <row>
                            <entry>
                                <para>Stop</para>
                            </entry>
                            <entry>
                                <para>The action for stopping a declared server</para>
                            </entry>
                        </row>

                        <row>
                            <entry>
                                <para>Publish</para>
                            </entry>
                            <entry>
                                <para>The action for synchronizing the publish information between
                                    the server and workspace</para>
                            </entry>
                        </row>

                        <row>
                            <entry>
                                <para>Explore</para>
                            </entry>
                            <entry>
                                <para>This action uses the native OS file explorer to browse the
                                    deploy destination. Note: The option is also available for
                                    deployed resources/projects (see the figure below).</para>
                            </entry>
                        </row>

                        <row>
                            <entry>
                                <para>Add and Remove Projects</para>
                            </entry>
                            <entry>
                                <para>The option allows to publish a new project to the server (if
                                    its type is supported)</para>
                            </entry>
                        </row>

                        <row>
                            <entry>
                                <para>Monitoring</para>
                            </entry>
                            <entry>
                                <para>Possibility to add ports to be monitored on the current
                                    server</para>
                            </entry>
                        </row>

                        <row>
                            <entry>
                                <para>Properties</para>
                            </entry>
                            <entry>
                                <para>Opens the window to adjust the current server
                                    preferences</para>
                            </entry>
                        </row>

                    </tbody>
                </tgroup>
            </table>

            <para>Under the server element in the <property>JBoss Server View</property>, you can
                see currently deployed to the server modules and some server extensions which
                provide the additional information on the server.</para>

            <para>The context menu for any module allows you to remove it from the server, force a
                full or incremental republish upon it.</para>

            <figure>
                <title>Modules Action</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/perspective/perspective_11.png"/>
                    </imageobject>
                </mediaobject>
            </figure>

            <section id="filesets">
                <title>Filesets</title>

                <para>The <emphasis>
                        <property>Filesets</property>
                    </emphasis> category in the <property>JBoss Server View</property> is intended
                    for files filtering.</para>

                <para>To add a new file filter, right-click the <emphasis>
                        <property>Filesets</property>
                    </emphasis> category and select <emphasis>
                        <property>Create File Filter</property>.</emphasis></para>
                <para id="filefilterWiz">The <property>New File
                            Filter wizard</property> should appear.</para>

                <figure>
                    <title>Creating a New File Filter</title>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="images/perspective/filesets1.png"/>
                        </imageobject>
                    </mediaobject>
                </figure>

                <para>The wizard asks you to enter the filter name and add includes and excludes
                    patterns. The preview box underneath gives a list of files matched to the
                    defined patterns (see the figures bellow).</para>
            	<para>In order to set up a default fileset relative to the concrete configuration of the server runtime, use the following variable: 
            		<literal>${jboss_config}</literal>, i. e. you should type in the <emphasis>
            			<property>Root Directory</property></emphasis> something like <literal>server/${jboss_config}/</literal>.
            		This is implemented in order you can modify the runtime&apos;s configuration and not have to manually update paths.</para>
            	<figure>
            		<title>New File Filter Wizard</title>
            		<mediaobject>
            			<imageobject>
            				<imagedata fileref="images/perspective/filesets2_a.png"/>
            			</imageobject>
            		</mediaobject>
            	</figure>
				
            	<para>Notice, that the <emphasis>
            		<property>Browse</property></emphasis> button still returns an absolute path:</para>
            	
            	<figure>
            		<title>New File Filter Wizard</title>
            		<mediaobject>
            			<imageobject>
            				<imagedata fileref="images/perspective/filesets2.png"/>
            			</imageobject>
            		</mediaobject>
            	</figure>
            	
                <para>After the filter is created, you can observe it by expanding the <emphasis>
                        <property>Filesets</property>
                    </emphasis> category in the <property>JBoss Server View</property>.</para>

                <para>It&apos;s possible now to edit files directly from the <emphasis>
                        <property>Filesets</property>
                    </emphasis> category. Double clicking on a file from <emphasis>
                        <property>Filesets</property>
                    </emphasis> opens up the editor automatically or you can use the <emphasis>
                        <property>Edit File</property>
                    </emphasis> context menu command.</para>

                <figure>
                    <title>Direct Editing from the Filesets</title>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="images/perspective/filesets3.png"/>
                        </imageobject>
                    </mediaobject>
                </figure>

                <para>To delete a file filter (or just a file) from the <emphasis>
                        <property>Filesets</property>,</emphasis> right-click a file filter (or the
                    unnecessary file) and select the <emphasis>
                        <property>Delete File Filter</property>
                    </emphasis>
                    <emphasis>(<property>Delete File</property>)</emphasis> command.</para>

                <figure>
                    <title>Deleting the File from the Filesets</title>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="images/perspective/filesets4.png"/>
                        </imageobject>
                    </mediaobject>
                </figure>
                <para>If you want to set filesets for some server types, you should open 
                    <emphasis><property>Window>Preferences</property></emphasis> 
                    and then select  <emphasis><property>Server > Default Filesets</property></emphasis>  
                    from the categories available on the left.</para>
                
                <figure>
                    <title>Deleting the File from the Filesets</title>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="images/perspective/filesets5.png"/>
                        </imageobject>
                    </mediaobject>
                </figure>
                    <para>On this preference page you can add a fileset 
                    to any server type or to all servers at once.To do this you should select the server type in the combo box and click <emphasis><property>Add fileset...</property></emphasis> button. 
                    In the opened <property>New File
                        Filter wizard</property> follow the steps described <link linkend="filefilterWiz">before</link> and finally click <emphasis><property>Apply</property></emphasis> button on the preference page.</para>
                        <para>The defined file filter will be automatically added  to new servers during creation.</para>
                
                
            </section>

            <section id="xml_configuration">
                <title>XML Configuration</title>
                <para>The <emphasis>
                        <property>XML Configuration</property>
                    </emphasis> category allows you to quickly browse to descriptor files in your
                    server's deploy directory and check or change the values. Basically, <emphasis>
                        <property>XML Configuration</property>
                    </emphasis> includes XML XPaths where an xpath is a path used to access some
                    specific part of an xml document. </para>

                <note>
                    <title>Note:</title>
                    <para>You are assumed to be familiar with XPath. If not, we highly suggested
                        that you look through an appropriate manual or tutorial on the topic.</para>
                </note>

                <para>The <emphasis>
                        <property>XML Configuration</property>
                    </emphasis> category itself contains only a list of categories. <emphasis>
                        <property>Ports</property>
                    </emphasis> are provided by default and is filled with many of the most commonly
                    used ports in the <property>JBoss Server</property>.</para>

                <figure>
                    <title>XML Configuration</title>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="images/perspective/perspective_14.png"/>
                        </imageobject>
                    </mediaobject>
                </figure>


                <!--para>In the <property>Properties
                    view</property> you can see an identifier and nested files underneath in which
                that xpath can be found as well as its current value. The details of the xpath are
                hidden as all you need to see is only which file you&apos;re referring to and
                what its current value is.</para-->

                <para>By right-clicking on <emphasis>
                        <property>XML Configuration</property>, </emphasis> you can create a new
                    category. Besides, context menu for <emphasis>
                        <property>XML Configuration</property>
                    </emphasis> category makes possible to disable it. You can disable any category
                    in the bottom part of the <emphasis>
                        <property>JBoss Server View</property>.</emphasis> Look for them in the <emphasis>
                        <property>Inactive Categories</property>
                    </emphasis> afterwards to re-enable.</para>

                <figure>
                    <title>Adding New Category</title>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="images/perspective/perspective_15.png"/>
                        </imageobject>
                    </mediaobject>
                </figure>

                <para>By right-clicking on <emphasis>
                        <property>Ports</property>
                    </emphasis> or any other category in <emphasis>
                        <property>XML Configuration</property>
                    </emphasis>, you can create a new xpath.</para>

                <figure>
                    <title>Adding New XPath</title>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="images/perspective/perspective_16.png"/>
                        </imageobject>
                    </mediaobject>
                </figure>

                <para>After that, the dialog shown below will appear.</para>

                <figure>
                    <title>Adding New XPath</title>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="images/perspective/perspective_17.png"/>
                        </imageobject>
                    </mediaobject>
                </figure>

                <para>The goal here is to get an end result where the XPath matches up with a
                    necessary property. With that in mind, let&apos;s look how it works. If the
                    property you want to reach is the value of the <emphasis>name</emphasis>
                    attribute in the element <code>&lt;mbean&gt;</code>, then your <emphasis>
                        <property>XPath Patten</property>
                    </emphasis>should end with <emphasis>mbean</emphasis> and your <emphasis>
                        <property>Attribute Name</property>
                    </emphasis> should be <emphasis>name</emphasis> like on the next figure.</para>

                <programlisting role="XML"><![CDATA[...
<server>
...
    <mbean code="org.jboss.ejb.EJBDeployer" 
                   name="jboss.ejb:service=EJBDeployer" xmbean-dd="">
  
     <!-- Inline XMBean Descriptor BEGIN -->
         <xmbean>
             <description>
                    The EJBDeployer responsible for ejb jar deployment</description> 
               ...
         </xmbean>
     </mbean>
</server>
]]></programlisting>

                <figure>
                    <title>XPath Preview</title>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="images/perspective/perspective_18.png"/>
                        </imageobject>
                    </mediaobject>
                </figure>

                <tip>
                    <title>Tip:</title>
                    <para>Notice, when you type the fields autocomplete to help you locate exactly
                        what xpath you&apos;re looking for.</para>
                </tip>

                <para>Then, on the other hand, if your desired field is the text of an element
                        <code>&lt;description&gt;</code>, your <emphasis>
                        <property>XPath Patten</property>
                    </emphasis> should end with <emphasis>description</emphasis> and <emphasis>
                        <property>Attribute Name</property>
                    </emphasis> field should be left blank. When finished, click <emphasis>
                        <property>Preview</property>
                    </emphasis> to see how many matches you have for that particular XPath.</para>

                <figure>
                    <title>XPath Preview</title>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="images/perspective/perspective_19.png"/>
                        </imageobject>
                    </mediaobject>
                </figure>

            </section>
        </section>

        <section id="dragndrop_to_jboss_server_view">
            <title>Drag-n-Drop to JBoss Server View</title>

            <para>Starting from 2.0.0.CR2 version of <property>JBoss AS Tools</property> the
                    <property>JBoss Server View</property> supports drag-n-drop of deployable and
                runnable projects/resources.</para>

            <figure>
                <title>Dragging to the JBoss Server View</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/perspective/dnd_toJBossServerView.png"/>
                    </imageobject>
                </mediaobject>
            </figure>

            <para>With drag-n-drop the following actions can be performed:</para>

            <itemizedlist>
                <listitem>
                    <para>dragging a project to a server will deploy it to the server and run it by
                        showing the main page in a browser</para>
                </listitem>

                <listitem>
                    <para>dragging an <emphasis>
                            <property>.xhtml</property>
                        </emphasis> file from <emphasis>
                            <property>WebContent</property>
                        </emphasis> will do the same and show the corresponding page in a
                        browser</para>
                </listitem>

                <listitem>
                    <para>dragging a deployable resource (i.e. a datasource (<emphasis>
                            <property>-ds.xml</property>
                        </emphasis>) file that has been made deployable) will simply deploy that
                        resource directly to the server</para>
                </listitem>
            </itemizedlist>

            <para>In short, the feature does the same thing as if you used the <emphasis>
                    <property>Run On Server</property>
                </emphasis> option or <emphasis>
                    <property>Add and Remove Projects</property>
                </emphasis> option in the context menu of the server.</para>
        </section>

        <section id="server_log">
            <title>Server Log View</title>

            <para>You can monitor the current server behavior with the help of the <property>Server
                    Log</property>. To open a server in the <property>Server Log view</property> you
                should right-click on the server and follow to <emphasis>
                    <property>Open in > Server Log</property>.</emphasis></para>

            <para>The <emphasis>
                    <property>Server Log</property>
                </emphasis> shows relevant information to your server&apos;s startup, shutdown,
                and publish processes. This allows you to keep an eye on what&apos;s going on
                (such as automatic incremental deployment if you have it enabled).</para>

            <figure>
                <title>Event Log Actions</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/perspective/perspective_12.png"/>
                    </imageobject>
                </mediaobject>
            </figure>

            <para>The <property>Server Log</property> toolbar contains several icons that perform
                the following actions:</para>

            <table>
                <title>Server Log Toolbar Icons</title>
                <tgroup cols="2">
                    <colspec colnum="1" align="left" colwidth="1*"/>
                    <colspec colnum="2" colwidth="3*"/>

                    <thead>
                        <row>
                            <entry align="center">
                                <para>Name</para>
                            </entry>

                            <entry align="center">
                                <para>Description</para>
                            </entry>
                        </row>
                    </thead>

                    <tbody>
                        <row>
                            <entry>
                                <para>Export Log</para>
                            </entry>
                            <entry>
                                <para>Possibility to export the log into a text file</para>
                            </entry>
                        </row>

                        <row>
                            <entry>
                                <para>Clear Log Viewer</para>
                            </entry>
                            <entry>
                                <para>The option clears the current server log</para>
                            </entry>
                        </row>

                        <row>
                            <entry>
                                <para>Delete Log</para>
                            </entry>
                            <entry>
                                <para>Click to delete the server log</para>
                            </entry>
                        </row>

                        <row>
                            <entry>
                                <para>Open Log</para>
                            </entry>
                            <entry>
                                <para>Click to open the server log text file</para>
                            </entry>
                        </row>

                        <row>
                            <entry>
                                <para>Restore Log</para>
                            </entry>
                            <entry>
                                <para>Click to restore the server log</para>
                            </entry>
                        </row>

                    </tbody>
                </tgroup>
            </table>

        </section>

        <section id="server_editor">
            <title>Server Editor</title>
            <para>By double-clicking on any server, an editor window will appear allowing you to
                edit parts of that server.</para>

            <figure>
                <title>Preferences Page for the Chosen Server</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/perspective/perspective_4.png"/>
                    </imageobject>
                </mediaobject>
            </figure>

            <tip>
                <title>Tip:</title>
                <para>On the figure you can see that a username/password is available in the UI when
                    configuring the server. If you get a SecurityException when trying to launch the
                    server, it is most likely because your server is protected and hence you need to
                    fill the username/password fields with appropriate values.</para>
            </tip>
			
        	<para>Under the <emphasis>
        		<property>Publishing</property></emphasis> section it&apos; possible to disable/inable the automatic publishing of the changes in the workspace.</para>
        	
            <para>It should be pointed out that our server adapter by default tries to automatically
                detect the ports it needs for integrating with a <property>JBoss Server</property>.
                Sometimes it can though be relevant to override this automatic detection if you are
                using some custom configuration. For this purposes the <emphasis>
                    <property>Server Ports</property>
                </emphasis> section in the <property>Server editor</property> is provided where the
                port settings are configurable. Click the <emphasis>
                    <property>Configure...</property>
                </emphasis> link to bring up the wizard for adjusting the settings for the
                ports.</para>

            <figure>
                <title>Server Ports Preferences</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/perspective/perspective_5.png"/>
                    </imageobject>
                </mediaobject>
            </figure>

            <para>Press <emphasis>
                    <property>Edit XPath</property>
                </emphasis> button for the chosen port to configure its XPath's values.</para>

            <figure>
                <title>XPath Pattern for a Server Port</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/perspective/perspective_6.png"/>
                    </imageobject>
                </mediaobject>
            </figure>

            <para>In the <property>Server editor</property> you are able to edit the timeouts and the server pollers to use.</para>
                
                <note>
                    <title>Note:</title>
                    <para>By default, the Startup poller is set to JMX Poller (see the <emphasis>
                    <property>Server Polling</property></emphasis> section). If you change the Startup poller
                to Timeout Poller (it may need in case, for example, you&apos;re using the minimal configuration for your server), this will do no polling at all and will only set the server
                state to <emphasis>
                    <property>&quot;Started&quot;</property></emphasis> after your startup timeout is reached.</para>
              </note>

            <para id="com_line_arg"><property>Server editor</property> makes it also possible to
                modify the server&apos;s launch configuration. It&apos;s just after clicking <emphasis>
                    <property>Open launch configuration</property>
                </emphasis> link. In the open window there are the tabs for setting command line
                arguments, main, classpaths and other things that are relevant to launching the
                server.</para>

            <figure>
                <title>Launch Configuration Properties</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/perspective/perspective_7.png"/>
                    </imageobject>
                </mediaobject>
            </figure>
            
            
            <para>The first tab shows the Jboss server arguments</para>
            <para>Look up <ulink
                    url="http://docs.jboss.org/jbossas/guides/installguide/r1/en/html/start-stop.html"
                    >AS Installation Guide </ulink> to find parameters which can be specified for <property>JBoss
                    Server</property>.</para>

            <note>
                <title>Note:</title>
                <para>Please note, that the Launch Configurations for JBoss Servers are enough
                    strict in enforcing the configured values in the server in order to avoid
                    inconsistencies between server&apos;s and their configured runtime.</para>

                <para>For example, if you change the launch configuration program arguments to
                        <emphasis>&quot;-c myConfig&quot;</emphasis> but do not change the
                    targeted runtime configuration, then your program arguments will be ignored. The
                    server runtime &quot;wins&quot; so to speak. This ensures consistency
                    and if you change the location of the runtime, your launch configurations will
                    automatically pick that up.</para>

                <para>Values are not controlled by the server and its runtime setup will be passed
                    on unaltered.</para>
            </note>
            
            <para>On the second tab you find the main class used for launching JBoss AS (default is org.jboss.Main), you can change it, if necessary. </para>

            <para>Until 3.0.0.GA release of <property>JBoss Tools</property>, the servers classpath
                was readonly, but that caused problems for users wanting to add their own jars in
                the startup classpath. That is relevant if you need to patch the server, add a
                custom charset or other tweaks that require early access to the classpath.</para>

            <para>Now all servers have a custom &apos;server runtime classpath
                container&apos;, which is there by default and point to the default jars in
                JBoss. You can now adjust the classpath. Then just make sure this container is there
                if you want the classpath to be picked up.</para>

            <figure>
                <title>Server Classpaths</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/perspective/server_classpaths.png"/>
                    </imageobject>
                </mediaobject>
            </figure>

            <para>If for some reason you have a launch configuration without this container, <emphasis>
                    <property>Restore Default Entries</property>
                </emphasis> should add it properly. Also, <emphasis>
                    <property>Restore Default Entries</property>
                </emphasis> will also remove any extra entries you added yourself.</para>
        </section>

        <section>
            <title>Relevant Resources Links</title>
            <para>Find more about XPath in the <ulink url="http://www.w3.org/TR/xpath20/">XPath
                    Documentation</ulink>.</para>
        </section>
    </section>

    <section id="Project_archivesView" role="updated">
        <title>Project Archives View</title>
        <para>Every application, whether Plain Old Java, J2EE, or some other language altogether,
            needs to be packaged in some way. In Java-related projects, many people use ANT. </para>
        <note>
            <title>Note:</title>
            <para>Those who use ANT will appreciate how the Project Archives Ant task is now
                improved: it supports variables and gives more informative error/logging messages
                when something goes wrong.</para>
        </note>

        <para>But <property>JBoss Tools</property> come with our own Archives tool with a bit easier
            and less-verbose XML and a handy user interface. The Project Archives plugin consists
            primarily of a view, that is <property>Project Archives view</property>, to set up each
            packaging configuration.</para>
        <para>So far, let&apos;s look through all functionality that the <property>Project
                Archives view</property> provides.</para>

        <section id="archives_overview">
            <title>Overview</title>

            <para>The packaging configuration for each project is stored in the project's root
                folder, and is in a file named <emphasis>
                    <property>.packages</property>
                </emphasis>, which has a fairly simple XML structure. Modifying the file by hand is
                neither required nor recommended, and using the UI is the official way of modifying
                your packaging structure.</para>

            <figure>
                <title>Archives View</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/perspective/perspective_21.png"/>
                    </imageobject>
                </mediaobject>
            </figure>

            <para>A project&apos;s configuration contains archives. As you can see on the image
                above a project can contain more than one archive. Internal archives and filesets
                can be directly inside of an archive, or in some sub-folder of that archive.</para>

            <para>In the upper right corner of the view you can see an icon which, when clicked,
                will build the selected top-level archive. Additionally, you can select <emphasis>
                    <property>Project &gt; Build Packages</property>
                </emphasis> when a project is selected in the <property>Packages View</property> to
                build all declared packages in that project&apos;s <emphasis>
                    <property>.packages</property>
                </emphasis> file. This will execute a full build on all declared archives.</para>
        </section>

        <section id="Creating_Archive">
            <title>Creating an Archive</title>

            <para>When you open the <property>Project archives view</property> for the first time,
                it asks you to select the project for what you want to create an archive.</para>

            <figure>
                <title>Archives View</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/perspective/perspective_21a.png"/>
                    </imageobject>
                </mediaobject>
            </figure>

            <para>When creating a new archive for selected project, you have some different options
                at your disposal. You need right-click inside the view and select <emphasis>
                    <property>New Archive</property>
                </emphasis> to see your archive type options.</para>

            <figure>
                <title>Create an Archive</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/perspective/perspective_22.png"/>
                    </imageobject>
                </mediaobject>
            </figure>

            <note>
                <title>Note:</title>
                <para>If you see only JAR from the list of available archive types, you should
                    verify whether AS Tools plugins/features are in place. EAR, EJB JAR and WAR
                    options are contributed by the AS Tools independently from webtools and the
                    virtual project model. Thus, without them only JAR will show up.</para>
            </note>

            <para><property>JAR</property> is the standard archive type, and does very little
                configuration, leaving most of the work up to you. You can customize the name, add
                folders, filesets, and inner jars to it.</para>

            <para>The other types, for the most part, simply start off with a default setting,
                usually the jar with some specific children based on an expected structure of the
                project. For example, if the project is a Dynamic Web Project, and you create a
                    <property>WAR</property> archive, the archive will be created with a few
                filesets relevant to the known structure of the project.</para>

            <para>Here is the first page of all New archive wizards. It is the same for any archive
                type and the only page in the <property>New Jar wizard</property>.</para>
            <figure>
                <title>New WAR Wizard</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/perspective/perspective_23.png"/>
                    </imageobject>
                </mediaobject>
            </figure>

            <para>The page is pretty simple. First it asks to set the name of your new archive and a
                destination.</para>

            <para>The destination of an archive can be anywhere on the file system, anywhere in the
                workspace, inside some other archive, or inside a folder declared inside an archive.
                Select the necessary checkbox (either <emphasis>
                    <property>workspace</property>
                </emphasis> or <emphasis>
                    <property> file system</property>
                </emphasis>) for marking the destination as related to either workspace or file
                system. You can browse to workspace or filesystem destinations by clicking on their
                respective buttons. To select a destination inside some other archive, you'll need
                to press the <emphasis>
                    <property>Workspace</property>
                </emphasis> button. At the bottom of the list, you&apos;ll see archives that
                have been declared in the workspace.</para>

            <figure>
                <title>Selecting the destination in the workspace</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/perspective/perspective_23a.png"/>
                    </imageobject>
                </mediaobject>
            </figure>

            <para>Also in the wizard for creating a new archive you can choose whether an archive to
                be compressed or exploded into a folder (without compression). You need just select
                proper chechbox in the <emphasis>
                    <property>Archive type</property>
                </emphasis> section.</para>
            <para>If a build or incremental update fails Project Archives will show an error
                dialog:</para>
            <figure>
                <title>Selecting the destination in the workspace</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/perspective/projectarchives_error.png"/>
                    </imageobject>
                </mediaobject>
            </figure>
            <para>Click in <emphasis>
                    <property>Details</property>
                </emphasis> to see detailed information about what caused the error.</para>

            <para>In the <property>Package Explorer</property> you can observe the created
                archive.</para>
            <figure>
                <title>The Archive in the Package Explorer</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/perspective/perspective_23b.png"/>
                    </imageobject>
                </mediaobject>
            </figure>

            <para>If you use the exploded type of archiving, instead of a single file archive the
                result put into a folder is displayed in the <property>Package
                Explorer</property>.</para>
            <figure>
                <title>The Exploded Archive in the Package Explorer</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/perspective/perspective_23c.png"/>
                    </imageobject>
                </mediaobject>
            </figure>

            <section id="CreatingaFolder">
                <title>Creating a Folder</title>
                <para>Creating a folder is much easier. You simply right-click on an archive or
                    folder you want your new folder to be a child under. The only piece of required
                    information is naming the file.</para>
            </section>
            <section id="CreatingaFileSet">
                <title>Creating a FileSet</title>
                <para>To create a new fileset, you click on an available target location such as an
                    archive, a nested archive, or a folder within an archive, and select <emphasis>
                        <property>New Fileset</property>. </emphasis></para>
                <para>The <property>New Fileset wizard</property> requires a destination (where the
                    files will go), and a root directory (or where the files are coming from). The
                    source can be anywhere in the workspace or from the filesystem at large.</para>

                <figure>
                    <title>Adding a New FileSet</title>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="images/perspective/perspective_24.png"/>
                        </imageobject>
                    </mediaobject>
                </figure>

                <para>Below that, the fileset requires only an includes pattern and an excludes
                    pattern. As you type in either of these fields, the preview viewer should update
                    itself with which files are matched.</para>

                <para>You can create a Fileset with flattening or without it. Look at the difference
                    on the figure below.</para>

                <figure>
                    <title>The FileSet with flattening and without it</title>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="images/perspective/perspective_24a.png"/>
                        </imageobject>
                    </mediaobject>
                </figure>

            </section>
            
            <section id="CreatingaUserLibrariesFileSet">
                <title>Creating User Library FileSet</title>
                
                <para>If you use user libraries in your projects you can also refer to these from project archives and have all the .jar/.zip files they refer included into the archive.</para>
                <para>To add a new user libraries file set, call the right-click menu on the necessary archive and choose &quot; New User Libraries FileSet&quot; item</para>
                
                <figure>
                    <title>Adding New User Library Fileset</title>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="images/perspective/userlibraryfileset1.png"/>
                        </imageobject>
                    </mediaobject>
                </figure>
                
                <para>You can edit the existing user libraries as well using &quot;User Libraries Fileset Wizard&quot;. Call the right-click menu on the library fileset and choose &quot;Edit Fileset &quot; item</para>
                
                <figure>
                    <title>Editing User Library Fileset</title>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="images/perspective/userlibraryfileset2.png"/>
                        </imageobject>
                    </mediaobject>
                </figure>
                
           </section>
                       
        </section>

        <section id="View_Actions">
            <title>Archive Actions</title>
            <figure>
                <title>Context Menu on the Item</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/perspective/perspective_25.png"/>
                    </imageobject>
                </mediaobject>
            </figure>
            <para>The context menu on the items in the view is extendable, but there are several
                that come standard.</para>

            <table>
                <title>Context Menu on the Item</title>
                <tgroup cols="2">
                    <colspec colnum="1" align="left" colwidth="1*"/>
                    <colspec colnum="2" colwidth="3*"/>


                    <thead>
                        <row>
                            <entry align="center">
                                <para>Name</para>
                            </entry>

                            <entry align="center">
                                <para>Description</para>
                            </entry>
                        </row>
                    </thead>

                    <tbody>

                        <row>
                            <entry>
                                <para>Build Archive (Full)</para>
                            </entry>

                            <entry>
                                <para>The action enabled only on top-level archives, which initiates
                                    a full build on that archive</para>
                            </entry>
                        </row>

                        <row>
                            <entry>
                                <para>Edit Archive</para>
                            </entry>

                            <entry>
                                <para>Standard action that brings up the wizard associated with that
                                    particular node type and allows the details to be changed</para>
                            </entry>
                        </row>

                        <row>
                            <entry>
                                <para>Delete Archive</para>
                            </entry>

                            <entry>
                                <para>Deleting node is standard action with deletion not needing an
                                    explanation</para>
                            </entry>
                        </row>

                        <row>
                            <entry>
                                <para>Publish To Server</para>
                            </entry>

                            <entry>
                                <para>The action means the ability to publish to a declared
                                    server</para>
                            </entry>
                        </row>

                        <row>
                            <entry>
                                <para>Edit publish settings</para>
                            </entry>

                            <entry>
                                <para>Gives possibility to edit an archive publish settings</para>
                            </entry>
                        </row>

                    </tbody>
                </tgroup>
            </table>
        </section>

        <section id="PublishToServer">
            <title>Publishing to Server</title>
            <para>Finally, you&apos;ll need to publish your application to a server. Here, we
                show you how to do it with the help of <emphasis>
                    <property>Archives View</property>. </emphasis></para>

            <figure>
                <title>Context Menu on the Item</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/perspective/perspective_26.png"/>
                    </imageobject>
                </mediaobject>
            </figure>
            <para>The dialog above appears after selecting <emphasis>
                    <property>Publish To Server</property>. </emphasis> To simply publish once, you
                just select the server(s) that you want, and finish. If you want the <emphasis>
                    <property>Publish to Server</property>
                </emphasis> action on that particular Archive to publish always to that set of
                servers, then check the appropriate checkbox. And finally, to enable automatic
                publishing upon build events, check the last checkbox.</para>
            <para>The automatic publishing feature is nice if, for example, your package's
                destination (where it is built) is a temporary folder and you want the archive
                published to several servers. If you only really want your archive published to one
                server, it might be easier to have the archive's destination folder be the deploy
                folder of the server.</para>
        </section>
        <section id="rel_res_links_archiving">
            <title>Relevant Resources Links</title>
            <para>Refer to <ulink url="http://ant.apache.org/manual/index.html">Ant manual</ulink>
                to find more on how to build your applications with help of Ant.</para>

            <para>We also recommend you to watch the <ulink
                    url="http://docs.jboss.org/tools/movies/demos/archiving/archiving.htm"
                    >movie</ulink> which demonstrates a powerful archiving functionality in
                    <property>JBoss Tools</property>.</para>

            <para>At this point, you are guessed to be familiar with <property>JBoss AS
                    perspective</property> and your next step now is to explore how to work with
                different kinds of projects.</para>
        </section>

    </section>


</chapter>
